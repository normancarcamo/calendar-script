var countrycode = 'US';
var response = {
  "status": 200,
  "holidays": {
    "2012-01-01": [
      {
        "name": "Last Day of Kwanzaa",
        "date": "2012-01-01",
        "observed": "2012-01-01",
        "public": false
      },
      {
        "name": "New Year's Day",
        "date": "2012-01-01",
        "observed": "2012-01-02",
        "public": true
      }
    ],
    "2012-01-06": [
      {
        "name": "Epiphany",
        "date": "2012-01-06",
        "observed": "2012-01-06",
        "public": false
      }
    ],
    "2012-01-07": [
      {
        "name": "Orthodox Christmas",
        "date": "2012-01-07",
        "observed": "2012-01-07",
        "public": false
      }
    ],
    "2012-01-16": [
      {
        "name": "Martin Luther King, Jr. Day",
        "date": "2012-01-16",
        "observed": "2012-01-16",
        "public": true
      }
    ],
    "2012-02-02": [
      {
        "name": "Groundhog Day",
        "date": "2012-02-02",
        "observed": "2012-02-02",
        "public": false
      }
    ],
    "2012-02-14": [
      {
        "name": "Valentine's Day",
        "date": "2012-02-14",
        "observed": "2012-02-14",
        "public": false
      }
    ],
    "2012-02-20": [
      {
        "name": "George Washington's Birthday",
        "date": "2012-02-20",
        "observed": "2012-02-20",
        "public": true
      }
    ],
    "2012-02-22": [
      {
        "name": "Ash Wednesday",
        "date": "2012-02-22",
        "observed": "2012-02-22",
        "public": false
      }
    ],
    "2012-03-17": [
      {
        "name": "St. Patrick's Day",
        "date": "2012-03-17",
        "observed": "2012-03-17",
        "public": false
      }
    ],
    "2012-04-01": [
      {
        "name": "April Fools' Day",
        "date": "2012-04-01",
        "observed": "2012-04-01",
        "public": false
      },
      {
        "name": "Palm Sunday",
        "date": "2012-04-01",
        "observed": "2012-04-01",
        "public": false
      }
    ],
    "2012-04-06": [
      {
        "name": "Good Friday",
        "date": "2012-04-06",
        "observed": "2012-04-06",
        "public": false
      }
    ],
    "2012-04-08": [
      {
        "name": "Easter",
        "date": "2012-04-08",
        "observed": "2012-04-08",
        "public": false
      }
    ],
    "2012-04-22": [
      {
        "name": "Earth Day",
        "date": "2012-04-22",
        "observed": "2012-04-22",
        "public": false
      }
    ],
    "2012-04-27": [
      {
        "name": "National Arbor Day",
        "date": "2012-04-27",
        "observed": "2012-04-27",
        "public": false
      }
    ],
    "2012-05-01": [
      {
        "name": "May Day",
        "date": "2012-05-01",
        "observed": "2012-05-01",
        "public": false
      }
    ],
    "2012-05-04": [
      {
        "name": "Star Wars Day",
        "date": "2012-05-04",
        "observed": "2012-05-04",
        "public": false
      }
    ],
    "2012-05-05": [
      {
        "name": "Cinco de Mayo",
        "date": "2012-05-05",
        "observed": "2012-05-05",
        "public": false
      }
    ],
    "2012-05-13": [
      {
        "name": "Mother's Day",
        "date": "2012-05-13",
        "observed": "2012-05-13",
        "public": false
      }
    ],
    "2012-05-28": [
      {
        "name": "Memorial Day",
        "date": "2012-05-28",
        "observed": "2012-05-28",
        "public": true
      }
    ],
    "2012-06-14": [
      {
        "name": "Flag Day",
        "date": "2012-06-14",
        "observed": "2012-06-14",
        "public": false
      }
    ],
    "2012-06-17": [
      {
        "name": "Father's Day",
        "date": "2012-06-17",
        "observed": "2012-06-17",
        "public": false
      }
    ],
    "2012-06-27": [
      {
        "name": "Helen Keller Day",
        "date": "2012-06-27",
        "observed": "2012-06-27",
        "public": false
      }
    ],
    "2012-07-04": [
      {
        "name": "Independence Day",
        "date": "2012-07-04",
        "observed": "2012-07-04",
        "public": true
      }
    ],
    "2012-08-26": [
      {
        "name": "Women's Equality Day",
        "date": "2012-08-26",
        "observed": "2012-08-26",
        "public": false
      }
    ],
    "2012-09-03": [
      {
        "name": "Labor Day",
        "date": "2012-09-03",
        "observed": "2012-09-03",
        "public": true
      }
    ],
    "2012-09-09": [
      {
        "name": "National Grandparent's Day",
        "date": "2012-09-09",
        "observed": "2012-09-09",
        "public": false
      }
    ],
    "2012-09-11": [
      {
        "name": "Patriot Day",
        "date": "2012-09-11",
        "observed": "2012-09-11",
        "public": false
      }
    ],
    "2012-09-17": [
      {
        "name": "Citizenship Day",
        "date": "2012-09-17",
        "observed": "2012-09-17",
        "public": false
      }
    ],
    "2012-10-06": [
      {
        "name": "German-American Day",
        "date": "2012-10-06",
        "observed": "2012-10-06",
        "public": false
      }
    ],
    "2012-10-08": [
      {
        "name": "Columbus Day",
        "date": "2012-10-08",
        "observed": "2012-10-08",
        "public": true
      }
    ],
    "2012-10-09": [
      {
        "name": "Leif Erikson Day",
        "date": "2012-10-09",
        "observed": "2012-10-09",
        "public": false
      }
    ],
    "2012-10-31": [
      {
        "name": "Halloween",
        "date": "2012-10-31",
        "observed": "2012-10-31",
        "public": false
      }
    ],
    "2012-11-06": [
      {
        "name": "Election Day",
        "date": "2012-11-06",
        "observed": "2012-11-06",
        "public": false
      },
      {
        "name": "Presidential Election",
        "date": "2012-11-06",
        "observed": "2012-11-06",
        "public": false
      }
    ],
    "2012-11-11": [
      {
        "name": "Veterans Day",
        "date": "2012-11-11",
        "observed": "2012-11-12",
        "public": true
      }
    ],
    "2012-11-22": [
      {
        "name": "Thanksgiving Day",
        "date": "2012-11-22",
        "observed": "2012-11-22",
        "public": true
      }
    ],
    "2012-11-23": [
      {
        "name": "Black Friday",
        "date": "2012-11-23",
        "observed": "2012-11-23",
        "public": false
      }
    ],
    "2012-12-07": [
      {
        "name": "Pearl Harbor Remembrance Day",
        "date": "2012-12-07",
        "observed": "2012-12-07",
        "public": false
      }
    ],
    "2012-12-08": [
      {
        "name": "Hanukkah",
        "date": "2012-12-08",
        "observed": "2012-12-08",
        "public": false
      },
      {
        "name": "Immaculate Conception of the Virgin Mary",
        "date": "2012-12-08",
        "observed": "2012-12-08",
        "public": false
      }
    ],
    "2012-12-09": [
      {
        "name": "Hanukkah",
        "date": "2012-12-09",
        "observed": "2012-12-09",
        "public": false
      }
    ],
    "2012-12-10": [
      {
        "name": "Hanukkah",
        "date": "2012-12-10",
        "observed": "2012-12-10",
        "public": false
      }
    ],
    "2012-12-11": [
      {
        "name": "Hanukkah",
        "date": "2012-12-11",
        "observed": "2012-12-11",
        "public": false
      }
    ],
    "2012-12-12": [
      {
        "name": "Hanukkah",
        "date": "2012-12-12",
        "observed": "2012-12-12",
        "public": false
      }
    ],
    "2012-12-13": [
      {
        "name": "Hanukkah",
        "date": "2012-12-13",
        "observed": "2012-12-13",
        "public": false
      }
    ],
    "2012-12-14": [
      {
        "name": "Hanukkah",
        "date": "2012-12-14",
        "observed": "2012-12-14",
        "public": false
      }
    ],
    "2012-12-15": [
      {
        "name": "Hanukkah",
        "date": "2012-12-15",
        "observed": "2012-12-15",
        "public": false
      }
    ],
    "2012-12-24": [
      {
        "name": "Christmas Eve",
        "date": "2012-12-24",
        "observed": "2012-12-24",
        "public": false
      }
    ],
    "2012-12-25": [
      {
        "name": "Christmas Day",
        "date": "2012-12-25",
        "observed": "2012-12-25",
        "public": true
      }
    ],
    "2012-12-26": [
      {
        "name": "First Day of Kwanzaa",
        "date": "2012-12-26",
        "observed": "2012-12-26",
        "public": false
      }
    ],
    "2012-12-27": [
      {
        "name": "Second Day of Kwanzaa",
        "date": "2012-12-27",
        "observed": "2012-12-27",
        "public": false
      }
    ],
    "2012-12-28": [
      {
        "name": "Third Day of Kwanzaa",
        "date": "2012-12-28",
        "observed": "2012-12-28",
        "public": false
      }
    ],
    "2012-12-29": [
      {
        "name": "Fourth Day of Kwanzaa",
        "date": "2012-12-29",
        "observed": "2012-12-29",
        "public": false
      }
    ],
    "2012-12-30": [
      {
        "name": "Fifth Day of Kwanzaa",
        "date": "2012-12-30",
        "observed": "2012-12-30",
        "public": false
      }
    ],
    "2012-12-31": [
      {
        "name": "New Year's Eve",
        "date": "2012-12-31",
        "observed": "2012-12-31",
        "public": true
      },
      {
        "name": "Sixth Day of Kwanzaa",
        "date": "2012-12-31",
        "observed": "2012-12-31",
        "public": false
      }
    ]
  }
};
var events = [{}, {}];
var query = {
  daysToShow: 50,
  startFrom: '2012-03-12',
  bounds: {
    from: -1,
    to: -1
  }
};
// var daysToSelect = 50;
console.clear();

var calendar = new Calendar();

calendar.on('each:year', function(year) {
  year.countrycode = countrycode;

  year.on('each:month', function(month) {
    month.on('each:day:added', function(day) {

      // SET HOLIDAY EVENT DESCRIPTION IN DAYS: *******************************
      if (day.date[1] in response.holidays) {
        day.holiday = response.holidays[day.date[1]];

        // SET HOLIDAYS INFO IN MONTHS:
        if (!month.holidays) {
          month.holidays = [day.holiday];
        } else {
          month.holidays.push(day.holiday);
        };
      };

      // MARK DAYS TO SHOW: ***************************************************
      if (day.date.indexOf(query.startFrom) >= 0) {
        query.bounds.from = day.summary.indexInYear;
        query.bounds.to = (day.summary.indexInYear + query.daysToShow);
      };

      if (day.summary.indexInYear >= query.bounds.from
        && day.summary.indexInYear <= query.bounds.to) {
        day.show = true;
      };

      // SET EVENTS IN A MONTH: ***********************************************
      day.events = events;
    });
  });

  year.on('each:month:added', function(month) {
    // SET HOLIDAYS INFO IN YEARS: ********************************************
    if (month.holidays) {
      if (!year.holidays) {
        year.holidays = [month.holidays];
      } else {
        year.holidays.push(month.holidays);
      };
    };

    // SPLIT DAYS IN WEEKS: ***************************************************
    var result = calendar.daysWithPadding(month);
    var weeks = calendar.filterDaysPerWeek(result.days);
    month.calendar = weeks;
  });
});

calendar.filter({ from: 2012 });
